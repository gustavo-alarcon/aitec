<div class="w3-section">
  <h4 style="font-size: 1.2em;font-weight: 600;">Delivery</h4>
  <button mat-raised-button class="w3-margin-bottom" (click)="openDialog(false,null)" color="primary">
    <span>Agregar</span>
    <mat-icon style="vertical-align: middle;margin-left: 5px;">add</mat-icon>
  </button>
  <div *ngIf="init$ | async">
    <div *ngIf="dataSource.data.length">
      <table mat-table [dataSource]="dataSource" matSort style="width:100%">
        <ng-container class="w3-center" matColumnDef="index">
          <th *matHeaderCellDef class="w3-center">Nº</th>
          <td mat-cell *matCellDef="let element; let i = index">
            {{
              1 + i + productsPaginator.pageIndex * productsPaginator.pageSize
            }}
          </td>
        </ng-container>

        <ng-container class="w3-center" matColumnDef="departamento">
          <th *matHeaderCellDef class="w3-center">Departamento</th>
          <td mat-cell *matCellDef="let element" class="w3-center" style="padding: 0px 10px">
            {{ element["departamento"]['name'] | titlecase }}
          </td>
        </ng-container>

        <ng-container class="w3-center" matColumnDef="provincia">
          <th *matHeaderCellDef class="w3-center">Provincia</th>
          <td mat-cell *matCellDef="let element" class="w3-center" style="padding: 0px 10px">
            {{ element["provincia"]['name'] }}
          </td>
        </ng-container>

        <ng-container class="w3-center" matColumnDef="distritos">
          <th *matHeaderCellDef class="w3-center">Distritos</th>
          <td mat-cell *matCellDef="let element" style="padding: 0px 10px">
            <ul>
              <li *ngFor="let dist of element['distritos']">{{dist.name}}</li>
            </ul>

          </td>
        </ng-container>
        <ng-container class="w3-center" matColumnDef="delivery">
          <th *matHeaderCellDef class="w3-center">Delivery</th>
          <td mat-cell *matCellDef="let element" class="w3-center" style="padding: 0px 10px">
            S/. {{element.delivery | number:'.2'}}
          </td>
        </ng-container>
        <ng-container class="w3-center" matColumnDef="actions" sticky>
          <th *matHeaderCellDef style="padding-left: 0.5em" class="w3-center">
            Acciones
          </th>
          <td mat-cell *matCellDef="let element; let ind = index" class="w3-center">
            <ng-container>
              <mat-menu #rawMenu="matMenu">
                <button class="w3-small" mat-menu-item (click)="openDialog(true,element)">
                  <mat-icon>edit</mat-icon> Editar
                </button>
                <button class="w3-small" mat-menu-item (click)="deleteDialog(element.id,'delivery','Delivery')">
                  <mat-icon>delete</mat-icon> Borrar
                </button>
              </mat-menu>

              <button mat-icon-button [matMenuTriggerFor]="rawMenu">
                <mat-icon>more_vert</mat-icon>
              </button>
            </ng-container>
          </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
      </table>
      <mat-paginator #productsPaginator style="border-radius: 0px 0px 10px 10px" [pageSizeOptions]="[5, 10, 20]"
        showFirstLastButtons></mat-paginator>
    </div>
  </div>
</div>
<hr>
<div class="w3-section">
  <h4 style="font-size: 1.2em;font-weight: 600;">Tiendas</h4>
  <button mat-raised-button class="w3-margin-bottom" (click)="openStoreDialog(false,null)" color="primary">
    <span>Agregar</span>
    <mat-icon style="vertical-align: middle;margin-left: 5px;">add</mat-icon>
  </button>
  <div *ngIf="initStore$ | async">
    <div *ngIf="dataStoreSource.data.length">
      <table mat-table [dataSource]="dataStoreSource" matSort style="width:100%">
        <ng-container class="w3-center" matColumnDef="index">
          <th *matHeaderCellDef class="w3-center">Nº</th>
          <td mat-cell *matCellDef="let element; let i = index">
            {{
              1 + i + storePaginator.pageIndex * storePaginator.pageSize
            }}
          </td>
        </ng-container>

        <ng-container class="w3-center" matColumnDef="departamento">
          <th *matHeaderCellDef class="w3-center">Departamento</th>
          <td mat-cell *matCellDef="let element" class="w3-center" style="padding: 0px 10px">
            {{ element["departamento"]['name'] | titlecase }}
          </td>
        </ng-container>

        <ng-container class="w3-center" matColumnDef="provincia">
          <th *matHeaderCellDef class="w3-center">Provincia</th>
          <td mat-cell *matCellDef="let element" class="w3-center" style="padding: 0px 10px">
            {{ element["provincia"]['name'] }}
          </td>
        </ng-container>

        <ng-container class="w3-center" matColumnDef="distritos">
          <th *matHeaderCellDef class="w3-center">Distritos</th>
          <td mat-cell *matCellDef="let element" style="padding: 0px 10px">
            {{ element["distrito"]['name'] }}

          </td>
        </ng-container>
        <ng-container class="w3-center" matColumnDef="address">
          <th *matHeaderCellDef class="w3-center">Dirección</th>
          <td mat-cell *matCellDef="let element" class="w3-center" style="padding: 0px 10px">
            {{element.address}}
          </td>
        </ng-container>
        <ng-container class="w3-center" matColumnDef="schedule">
          <th *matHeaderCellDef class="w3-center">Horario de atención</th>
          <td mat-cell *matCellDef="let element" class="w3-center" style="padding: 0px 10px">
            {{element.schedule}}
          </td>
        </ng-container>
        <ng-container class="w3-center" matColumnDef="actions" sticky>
          <th *matHeaderCellDef style="padding-left: 0.5em" class="w3-center">
            Acciones
          </th>
          <td mat-cell *matCellDef="let element; let ind = index" class="w3-center">
            <ng-container>
              <mat-menu #rawMenu="matMenu">
                <button class="w3-small" mat-menu-item (click)="openStoreDialog(true,element)">
                  <mat-icon>edit</mat-icon> Editar
                </button>
                <button class="w3-small" mat-menu-item (click)="deleteDialog(element.id,'stores','Tienda')">
                  <mat-icon>delete</mat-icon> Borrar
                </button>
              </mat-menu>

              <button mat-icon-button [matMenuTriggerFor]="rawMenu">
                <mat-icon>more_vert</mat-icon>
              </button>
            </ng-container>
          </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="displayedStoreColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedStoreColumns"></tr>
      </table>
      <mat-paginator #storePaginator style="border-radius: 0px 0px 10px 10px" [pageSizeOptions]="[5, 10, 20]"
        showFirstLastButtons></mat-paginator>
    </div>
  </div>
</div>